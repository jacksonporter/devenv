name: Audit

on:
  push:
    branches:
        - "**"

jobs:
  test-linux:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        arch:
          - amd64
          - arm64
        includes:
          - arch: amd64
          - runs-on: ubuntu-24.04
          - arch: arm64
          - runs-on: ubuntu-24.04-arm
    steps:
      - uses: actions/checkout@v4
      - run: |
          sudo apt-get update
          sudo apt-get install -y podman
      - run: |
          ./tests/linux.sh